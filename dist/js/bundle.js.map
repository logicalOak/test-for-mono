{"version":3,"file":"js/bundle.js","mappings":"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","sources":["webpack://static-site-webpack-habr/webpack/bootstrap","webpack://static-site-webpack-habr/webpack/runtime/make namespace object","webpack://static-site-webpack-habr/./src/js/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","document.addEventListener('DOMContentLoaded', function () {\r\n\t// map\r\n\tfunction init() {\r\n\t\tlet map = new ymaps.Map('map', {\r\n\t\t\tcenter: [55.17630703499772, 39.4789277226596],\r\n\t\t\tzoom: 6,\r\n\t\t});\r\n\r\n\t\tlet placemark = new ymaps.Placemark(\r\n\t\t\t[54.66139297397919, 39.74807384064804],\r\n\t\t\t{},\r\n\t\t\t{\r\n\t\t\t\ticonLayout: 'default#image',\r\n\t\t\t\ticonImageHref: '../img/marker.svg',\r\n\t\t\t\ticonImageSize: [36, 40],\r\n\t\t\t\ticonImageOffset: [-15, -55],\r\n\t\t\t},\r\n\t\t);\r\n\t\tlet placemarkMsk = new ymaps.Placemark(\r\n\t\t\t[55.753655905340665, 37.633224597659606],\r\n\t\t\t{},\r\n\t\t\t{\r\n\t\t\t\ticonLayout: 'default#image',\r\n\t\t\t\ticonImageHref: '../img/marker.svg',\r\n\t\t\t\ticonImageSize: [36, 40],\r\n\t\t\t\ticonImageOffset: [-15, -55],\r\n\t\t\t},\r\n\t\t);\r\n\t\tlet placemarkTmb = new ymaps.Placemark(\r\n\t\t\t[52.788278068229104, 41.46912479712747],\r\n\t\t\t{},\r\n\t\t\t{\r\n\t\t\t\ticonLayout: 'default#image',\r\n\t\t\t\ticonImageHref: '../img/marker.svg',\r\n\t\t\t\ticonImageSize: [36, 40],\r\n\t\t\t\ticonImageOffset: [-15, -55],\r\n\t\t\t},\r\n\t\t);\r\n\t\tlet placemarkMns = new ymaps.Placemark(\r\n\t\t\t[53.969996242020144, 27.561777189869517],\r\n\t\t\t{},\r\n\t\t\t{\r\n\t\t\t\ticonLayout: 'default#image',\r\n\t\t\t\ticonImageHref: '../img/marker.svg',\r\n\t\t\t\ticonImageSize: [36, 40],\r\n\t\t\t\ticonImageOffset: [-15, -55],\r\n\t\t\t},\r\n\t\t);\r\n\t\tlet placemarkKzn = new ymaps.Placemark(\r\n\t\t\t[55.866843253660306, 49.11998455804014],\r\n\t\t\t{},\r\n\t\t\t{\r\n\t\t\t\ticonLayout: 'default#image',\r\n\t\t\t\ticonImageHref: '../img/marker.svg',\r\n\t\t\t\ticonImageSize: [36, 40],\r\n\t\t\t\ticonImageOffset: [-15, -50],\r\n\t\t\t},\r\n\t\t);\r\n\r\n\t\tmap.geoObjects.add(placemark);\r\n\t\tmap.geoObjects.add(placemarkMsk);\r\n\t\tmap.geoObjects.add(placemarkTmb);\r\n\t\tmap.geoObjects.add(placemarkMns);\r\n\t\tmap.geoObjects.add(placemarkKzn);\r\n\r\n\t\tmap.controls.remove('geolocationControl');\r\n\t\tmap.controls.remove('trafficControl');\r\n\t\tmap.controls.remove('typeSelector');\r\n\t\tmap.controls.remove('fullscreenControl');\r\n\t\tmap.controls.remove('searchControl');\r\n\t\tmap.controls.remove('zoomControl');\r\n\t\tmap.controls.remove('rulerControl');\r\n\t}\r\n\r\n\tymaps.ready(init);\r\n\r\n\t// form\r\n\tconst nameInput = document.querySelector('#name');\r\n\tconst phoneInput = document.querySelector('#phone');\r\n\tconst checkboxInput = document.querySelector('#checkbox');\r\n\r\n\tconst form = document.querySelector('#form');\r\n\r\n\tconst checkUsername = () => {\r\n\t\tlet valid = false;\r\n\r\n\t\tconst min = 3,\r\n\t\t\tmax = 25;\r\n\r\n\t\tconst username = nameInput.value.trim();\r\n\r\n\t\tif (!isRequired(username)) {\r\n\t\t\tshowError(nameInput, 'Является обязательным полем');\r\n\t\t\tshowInputError(nameInput);\r\n\t\t} else if (!isBetween(username.length, min, max)) {\r\n\t\t\tshowError(nameInput, `Имя должно содержать от ${min} до ${max} символов.`);\r\n\t\t\tshowInputError(nameInput);\r\n\t\t} else {\r\n\t\t\tshowSuccess(nameInput);\r\n\t\t\tremoveInputError(nameInput);\r\n\t\t\tvalid = true;\r\n\t\t}\r\n\t\treturn valid;\r\n\t};\r\n\r\n\tconst checkUserPhone = () => {\r\n\t\tlet valid = false;\r\n\t\tconst phone = phoneInput.value.trim();\r\n\t\tif (!isRequired(phone)) {\r\n\t\t\tshowError(phoneInput, 'Введите номер телефона.');\r\n\t\t\tshowInputError(phoneInput);\r\n\t\t} else if (!isPhoneValid(phone)) {\r\n\t\t\tshowError(phoneInput, 'Введите правильный номер.');\r\n\t\t\tshowInputError(phoneInput);\r\n\t\t} else {\r\n\t\t\tshowSuccess(phoneInput);\r\n\t\t\tremoveInputError(phoneInput);\r\n\t\t\tvalid = true;\r\n\t\t}\r\n\t\treturn valid;\r\n\t};\r\n\r\n\tconst checkCheckBox = () => {\r\n\t\tlet valid = false;\r\n\t\tif (checkboxInput.checked === false) {\r\n\t\t\tshowError(checkboxInput, 'Подтвердите согласие.');\r\n\t\t} else {\r\n\t\t\tshowSuccess(checkboxInput);\r\n\t\t\tvalid = true;\r\n\t\t}\r\n\t\treturn valid;\r\n\t};\r\n\r\n\tconst isPhoneValid = (phone) => {\r\n\t\tconst re =\r\n\t\t\t/^(\\+7|7|8)?[\\s\\-]?\\(?[489][0-9]{2}\\)?[\\s\\-]?[0-9]{3}[\\s\\-]?[0-9]{2}[\\s\\-]?[0-9]{2}$/;\r\n\t\treturn re.test(phone);\r\n\t};\r\n\r\n\tconst isRequired = (value) => (value === '' ? false : true);\r\n\tconst isBetween = (length, min, max) => (length < min || length > max ? false : true);\r\n\r\n\tconst showError = (input, message) => {\r\n\t\t// get the form-field element\r\n\t\tconst formField = input.parentElement;\r\n\t\t// add the error class\r\n\t\tformField.classList.remove('success');\r\n\t\tformField.classList.add('error');\r\n\r\n\t\t// show the error message\r\n\t\tconst error = formField.querySelector('small');\r\n\t\terror.textContent = message;\r\n\t};\r\n\r\n\tconst showSuccess = (input) => {\r\n\t\t// get the form-field element\r\n\t\tconst formField = input.parentElement;\r\n\r\n\t\t// remove the error class\r\n\t\tformField.classList.remove('error');\r\n\t\tformField.classList.add('success');\r\n\r\n\t\t// hide the error message\r\n\t\tconst error = formField.querySelector('small');\r\n\t\terror.textContent = '';\r\n\t};\r\n\r\n\tconst showInputError = (input) => {\r\n\t\tinput.classList.add('input-error');\r\n\t};\r\n\tconst removeInputError = (input) => {\r\n\t\tinput.classList.remove('input-error');\r\n\t};\r\n\r\n\tconst sendForm = async (formData) => {\r\n\t\tconst url = '/path/to/server/';\r\n\t\tconst response = await fetch(url, {\r\n\t\t\tmethod: 'POST',\r\n\t\t\tbody: formData,\r\n\t\t});\r\n\t\tconsole.log(response);\r\n\t\tif (!response.ok) {\r\n\t\t\tthrow new Error(`Ошибка по адресу ${url}, статус ошибки ${response.status}`);\r\n\t\t}\r\n\t\treturn await response.text();\r\n\t};\r\n\r\n\t//masked function\r\n\tconst maskedPhone = (input) => {\r\n\t\tlet keyCode;\r\n\t\tfunction mask(event) {\r\n\t\t\tevent.keyCode && (keyCode = event.keyCode);\r\n\t\t\tlet pos = this.selectionStart;\r\n\t\t\tif (pos < 3) event.preventDefault();\r\n\t\t\tlet matrix = '+7 (___)-___-__-__',\r\n\t\t\t\ti = 0,\r\n\t\t\t\tdef = matrix.replace(/\\D/g, ''),\r\n\t\t\t\tval = this.value.replace(/\\D/g, ''),\r\n\t\t\t\tnew_value = matrix.replace(/[_\\d]/g, function (a) {\r\n\t\t\t\t\treturn i < val.length ? val.charAt(i++) || def.charAt(i) : a;\r\n\t\t\t\t});\r\n\t\t\ti = new_value.indexOf('_');\r\n\t\t\tif (i != -1) {\r\n\t\t\t\ti < 5 && (i = 3);\r\n\t\t\t\tnew_value = new_value.slice(0, i);\r\n\t\t\t}\r\n\t\t\tlet reg = matrix\r\n\t\t\t\t.substr(0, this.value.length)\r\n\t\t\t\t.replace(/_+/g, function (a) {\r\n\t\t\t\t\treturn '\\\\d{1,' + a.length + '}';\r\n\t\t\t\t})\r\n\t\t\t\t.replace(/[+()]/g, '\\\\$&');\r\n\t\t\treg = new RegExp('^' + reg + '$');\r\n\t\t\tif (!reg.test(this.value) || this.value.length < 5 || (keyCode > 47 && keyCode < 58))\r\n\t\t\t\tthis.value = new_value;\r\n\t\t\tif (event.type == 'blur' && this.value.length < 5) this.value = '';\r\n\t\t}\r\n\r\n\t\tinput.addEventListener('input', mask, false);\r\n\t\tinput.addEventListener('focus', mask, false);\r\n\t\tinput.addEventListener('blur', mask, false);\r\n\t\tinput.addEventListener('keydown', mask, false);\r\n\t};\r\n\tmaskedPhone(phoneInput);\r\n\r\n\tform.addEventListener('submit', function (e) {\r\n\t\t// prevent the form from submitting\r\n\t\te.preventDefault();\r\n\t\t// create formData\r\n\t\tconst formData = new FormData(this);\r\n\r\n\t\t// validate fields\r\n\t\tlet isUsernameValid = checkUsername(),\r\n\t\t\tisPhoneValid = checkUserPhone();\r\n\t\tisCheckboxValid = checkCheckBox();\r\n\r\n\t\tlet isFormValid = isUsernameValid && isPhoneValid && isCheckboxValid;\r\n\r\n\t\t// submit to the server if the form is valid\r\n\t\tif (isFormValid) {\r\n\t\t\tsendForm(formData)\r\n\t\t\t\t.then((response) => {\r\n\t\t\t\t\tconsole.log(response);\r\n\t\t\t\t\tform.reset();\r\n\t\t\t\t})\r\n\t\t\t\t.catch((err) => {\r\n\t\t\t\t\tconsole.error(err);\r\n\t\t\t\t\talert('Что-то пошло не так, попробуйте еще раз');\r\n\t\t\t\t\tform.reset();\r\n\t\t\t\t});\r\n\t\t}\r\n\t});\r\n\r\n\tconst debounce = (fn, delay = 500) => {\r\n\t\tlet timeoutId;\r\n\t\treturn (...args) => {\r\n\t\t\t// cancel the previous timer\r\n\t\t\tif (timeoutId) {\r\n\t\t\t\tclearTimeout(timeoutId);\r\n\t\t\t}\r\n\t\t\t// setup a new timer\r\n\t\t\ttimeoutId = setTimeout(() => {\r\n\t\t\t\tfn.apply(null, args);\r\n\t\t\t}, delay);\r\n\t\t};\r\n\t};\r\n\r\n\t// listeners\r\n\tnameInput.addEventListener(\r\n\t\t'input',\r\n\t\tdebounce(function (e) {\r\n\t\t\tcheckUsername();\r\n\t\t}),\r\n\t);\r\n\r\n\tphoneInput.addEventListener(\r\n\t\t'input',\r\n\t\tdebounce(function (e) {\r\n\t\t\tcheckUserPhone();\r\n\t\t}),\r\n\t);\r\n});\r\n"],"names":["__webpack_require__","exports","Symbol","toStringTag","Object","defineProperty","value","document","addEventListener","ymaps","ready","map","Map","center","zoom","placemark","Placemark","iconLayout","iconImageHref","iconImageSize","iconImageOffset","placemarkMsk","placemarkTmb","placemarkMns","placemarkKzn","geoObjects","add","controls","remove","nameInput","querySelector","phoneInput","checkboxInput","form","checkUsername","valid","username","trim","isRequired","isBetween","length","showSuccess","removeInputError","showError","showInputError","checkUserPhone","phone","isPhoneValid","test","min","max","input","message","formField","parentElement","classList","textContent","keyCode","mask","event","this","selectionStart","preventDefault","matrix","i","def","replace","val","new_value","a","charAt","indexOf","slice","reg","substr","RegExp","type","maskedPhone","e","formData","FormData","isUsernameValid","isCheckboxValid","checked","checkCheckBox","async","url","response","fetch","method","body","console","log","ok","Error","status","text","sendForm","then","reset","catch","err","error","alert","debounce","fn","delay","timeoutId","args","clearTimeout","setTimeout","apply"],"sourceRoot":""}